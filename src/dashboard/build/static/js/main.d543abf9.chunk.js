(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{16:function(e,t,a){e.exports=a(29)},28:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(1),o=a.n(s),i=a(3),l=a.n(i),c=a(6),u=a(9),m=a(10),d=a(15),h=a(14),f=a(13),g=a(7),p=a(4),w=a.n(p),y=function(){return n.a.createElement("nav",{className:"flex items-center justify-between flex-wrap bg-white py-6 px-6 md:px-16 shadow-sm"},n.a.createElement("div",{className:"flex items-center flex-shrink-0 text-gray-600 mr-6"},n.a.createElement("span",{className:"text-xl tracking-tight"},"COVID-19 DASHBOARD")),n.a.createElement("div",{className:"w-full block flex-grow lg:flex lg:items-center lg:w-auto"},n.a.createElement("div",{className:"text-sm lg:flex-grow"}),n.a.createElement("div",null,n.a.createElement("a",{href:"https://datahub.io/core/covid-19",target:"_blank",className:"block mt-4 lg:ml-6 lg:inline-block lg:mt-0 text-sm text-gray-700 hover:text-black"},"RAW DATA"),n.a.createElement("a",{href:"https://www.datopian.com/about/",target:"_blank",className:"block mt-4 lg:ml-6 lg:inline-block lg:mt-0 text-sm text-gray-700 hover:text-black"},"TEAM"),n.a.createElement("a",{href:"https://www.datopian.com/contact/",target:"_blank",className:"block mt-4 lg:ml-6 lg:inline-block lg:mt-0 text-sm text-gray-700 hover:text-black"},"CONTACT"))))},v=function(e){var t=e.totalCases,a=e.totalDeaths,r=e.deathRate,s=e.newCases,o=e.newCaseRate;return n.a.createElement("div",{className:"grid sm:grid-cols-1 lg:grid-cols-5 gap-8 mt-4 mb-4 font-bold text-3xl"},n.a.createElement("div",{className:"border text-center py-16"},t,n.a.createElement("div",{className:"text-xs text-gray-600 font-light"},"Cases")),n.a.createElement("div",{className:"border text-center py-16"},a,n.a.createElement("div",{className:"text-xs text-gray-600 font-light"},"Deaths")),n.a.createElement("div",{className:"border text-center py-16"},r,"%",n.a.createElement("div",{className:"text-xs text-gray-600 font-light"},"Death rate")),n.a.createElement("div",{className:"border text-center py-16"},s,n.a.createElement("div",{className:"text-xs text-gray-600 font-light"},"New cases yesterday")),n.a.createElement("div",{className:"border text-center py-16"},o,"%",n.a.createElement("div",{className:"text-xs text-gray-600 font-light"},"New cases rate")))},C=a(11),x=a.n(C),D=function(e){var t=e.data.map((function(e,t){var a=JSON.parse(JSON.stringify(e)),r=["black","gray","orange"];switch(t){case 0:a.name="Cumilative confirmed cases",a.mode="lines+markers",a.marker={color:r[t]};break;case 1:a.name="New cases per day",a.marker={color:r[t]};break;case 2:a.name="Deaths per day",a.marker={color:r[t]}}return a}));return n.a.createElement(x.a,{className:"w-full",data:t,layout:{yaxis:{type:"log"}},config:{responsive:!0,displayModeBar:!1}})},b=(a(28),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={country:"world",countriesToCompare:[],worldwideData:[],countryData:[],isLoading:!1},r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL(window.location.href),a=t.searchParams.get("country")||"world",this.setState({isLoading:!0,country:a}),r="https://raw.githubusercontent.com/datasets/covid-19/master/data/worldwide-aggregated.csv",n="https://raw.githubusercontent.com/datasets/covid-19/master/data/countries-aggregated.csv",s={isLoading:!1},e.next=8,Promise.all([r,n].map(function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(a=e.sent,t!==r){e.next=13;break}return e.t0=g.parse,e.next=7,a.text();case 7:e.t1=e.sent,e.t2={header:!0},s.worldwideData=(0,e.t0)(e.t1,e.t2).data,s.worldwideData[s.worldwideData.length-1].Date||s.worldwideData.pop(),e.next=21;break;case 13:if(t!==n){e.next=21;break}return e.t3=g.parse,e.next=17,a.text();case 17:e.t4=e.sent,e.t5={header:!0},s.countryData=(0,e.t3)(e.t4,e.t5).data,s.countryData[s.countryData.length-1].Date||s.countryData.pop();case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:this.setState(s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCountriesDataForDate",value:function(e){var t=this.state.countryData;if(t.length>0){var a=[];if("latest"===e)e=t[t.length-1].Date;else if("previous"===e){var r=t[t.length-1].Date,n=new Date(r),s=new Date(n.setDate(n.getDate()-1));e=s.toISOString().slice(0,10)}return t.forEach((function(t){t.Date===e&&a.push(t)})),a}}},{key:"getTotalCasesAndDeaths",value:function(){var e,t,a=this.state,r=a.worldwideData,n=a.country;if("world"===n&&r.length>0)e=r[r.length-1].Confirmed,t=r[r.length-1].Deaths;else{var s=this.getCountriesDataForDate("latest");if(s){var o=s.find((function(e){return e.Country.toLowerCase()===n.toLowerCase()}));e=o.Confirmed,t=o.Deaths}}return{totalCases:e,totalDeaths:t}}},{key:"getNewCasesAndRate",value:function(){var e,t,a=this.state,r=a.worldwideData,n=a.countryData,s=a.country;if("world"===s&&r.length>0)t=((e=r[r.length-1].Confirmed-r[r.length-2].Confirmed)/r[r.length-2].Confirmed*100).toFixed(2);else if(n.length>0){var o=this.getCountriesDataForDate("latest").find((function(e){return e.Country.toLowerCase()===s.toLowerCase()})),i=this.getCountriesDataForDate("previous").find((function(e){return e.Country.toLowerCase()===s.toLowerCase()}));t=((e=o.Confirmed-i.Confirmed)/i.Confirmed*100).toFixed(2)}return{newCases:e,newCasesRate:t}}},{key:"getChartData",value:function(){var e=this.state,t=e.country,a=e.worldwideData,r=e.countryData,n={x:[],y:[],type:"scatter"},s={x:[],y:[],type:"bar"},o={x:[],y:[],type:"bar"},i={Confirmed:0,Deaths:0};return"world"===t?a.forEach((function(e){n.x.push(e.Date),n.y.push(parseInt(e.Confirmed)),s.x.push(e.Date),s.y.push(e.Confirmed-i.Confirmed),o.x.push(e.Date),o.y.push(e.Deaths-i.Deaths),i=JSON.parse(JSON.stringify(e))})):r.forEach((function(e){e.Country.toLowerCase()===t.toLowerCase()&&(n.x.push(e.Date),n.y.push(parseInt(e.Confirmed)),s.x.push(e.Date),s.y.push(e.Confirmed-i.Confirmed),o.x.push(e.Date),o.y.push(e.Deaths-i.Deaths),i=JSON.parse(JSON.stringify(e)))})),[n,s,o]}},{key:"getChartDataForComparison",value:function(){var e=this.state,t=e.countriesToCompare,a=e.countryData,r=[];return t.forEach((function(e){var t={x:[],y:[]};a.forEach((function(a){a.Country.toLowerCase()===e.toLowerCase()&&(t.x.push(a.Date),t.y.push(a.Confirmed))})),r.push(t)})),r}},{key:"getCountryOptions",value:function(){var e=[{value:"world",label:"World"}],t=this.getCountriesDataForDate("latest");return t&&t.forEach((function(t){return e.push({value:t.Country,label:t.Country})})),e}},{key:"onSelectChanged",value:function(e){var t=new URL(window.location.href);t.searchParams.set("country",e.value),window.history.pushState({path:t.href},"",t.href),this.setState({country:e.value})}},{key:"onCompareSelectChanged",value:function(e){var t=this.state.countriesToCompare,a=JSON.parse(JSON.stringify(t));a.push(e.value),this.setState({countriesToCompare:a})}},{key:"render",value:function(){var e=this.state,t=e.country,a=e.isLoading,r=this.getTotalCasesAndDeaths(),s=r.totalCases,o=r.totalDeaths,i=(o/s*100).toFixed(2),l=this.getNewCasesAndRate(),c=l.newCases,u=l.newCasesRate,m=this.getChartData(),d=this.getCountryOptions();return a?n.a.createElement("div",{className:"flex h-screen"},n.a.createElement("p",{className:"m-auto"},"Loading ...")):n.a.createElement("div",null,n.a.createElement(y,null),n.a.createElement("div",{className:"px-6 md:px-16"},n.a.createElement(f.a,{className:"mt-6 w-full md:w-1/3 capitalize",options:d,defaultValue:{value:t,label:t},isLoading:a,onChange:this.onSelectChanged.bind(this)}),n.a.createElement(v,{totalCases:w()(s).format("0,0"),totalDeaths:w()(o).format("0,0"),deathRate:i,newCases:w()(c).format("0,0"),newCaseRate:u}),n.a.createElement("div",{className:"mt-4 mb-4 w-full"},n.a.createElement(D,{data:m}))))}}]),a}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.d543abf9.chunk.js.map